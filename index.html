<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Linta & Nijo — Wedding Invitation</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        text-align: center;
        background: #fff7f7;
    }
    .container {
        width: 90%;
        max-width: 600px;
        margin: auto;
        padding: 20px;
    }
    h1 {
        font-size: 32px;
        margin-bottom: 5px;
        color: #b30059;
    }
    h3 {
        font-size: 18px;
        color: #444;
    }
    .countdown {
        font-size: 22px;
        font-weight: bold;
        margin: 20px 0;
        color: #d63384;
    }
    .section-title {
        font-size: 22px;
        margin-top: 40px;
        color: #b30059;
        text-decoration: underline;
    }
    input, select, textarea {
        width: 100%;
        padding: 10px;
        margin: 8px 0;
        border-radius: 5px;
        border: 1px solid #ccc;
        font-size: 16px;
    }
    button {
        background: #b30059;
        color: white;
        padding: 12px 20px;
        border: none;
        font-size: 18px;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 10px;
    }
    button:hover {
        background: #800040;
    }
    #guestList {
        text-align: left;
        background: white;
        padding: 15px;
        border-radius: 10px;
        margin-top: 20px;
        font-size: 16px;
        border: 1px solid #ffd6e8;
    }
    .contact {
        font-size: 18px;
        margin-top: 20px;
    }
</style>
</head>

<body>

<div class="container">

    <h1>Linta & Nijo</h1>
    <h3>Wedding Invitation</h3>

    <!-- Countdown -->
    <div id="countdown" class="countdown"></div>

    <!-- Add to Google Calendar -->
    <a href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Linta+%26+Nijo+Wedding&dates=20250115T110000/20250115T130000&details=Wedding+Ceremony&location=St.+Thomas+Marthoma+Church%2C+Vilangara" target="_blank">
        <button>Add to Google Calendar</button>
    </a>

    <!-- RSVP Section -->
    <h2 class="section-title">RSVP</h2>

    <form id="rsvpForm">
        <input type="text" id="name" placeholder="Your Name" required>
        
        <select id="status" required>
            <option value="">Will you attend?</option>
            <option value="Yes">Yes, I will attend</option>
            <option value="No">No, I cannot attend</option>
        </select>

        <textarea id="note" placeholder="Message (optional)"></textarea>

        <button type="submit">Submit RSVP</button>
    </form>

    <h2 class="section-title">Guest List</h2>
    <div id="guestList">Loading...</div>

    <!-- Contact Section -->
    <h2 class="section-title">Contact</h2>
    <div class="contact">
        <p>Roy: <b>9744836163</b></p>
        <p>Nijo: <b>8921077115</b></p>
        <p>Georgekutty: <b>9495475170</b></p>
    </div>

</div>

<!-- JAVASCRIPT SECTION -->
<script>

// === COUNTDOWN TIMER ===
var weddingDate = new Date("January 15, 2025 11:00:00").getTime();
setInterval(function () {
    var now = new Date().getTime();
    var diff = weddingDate - now;

    if (diff < 0) {
        document.getElementById("countdown").innerHTML = "Wedding Completed!";
        return;
    }

    var days = Math.floor(diff / (1000 * 60 * 60 * 24));
    var hours = Math.floor((diff % (1000*60*60*24)) / (1000*60*60));
    var minutes = Math.floor((diff % (1000*60*60)) / (1000*60));

    document.getElementById("countdown").innerHTML =
        days + " days " + hours + " hours " + minutes + " minutes remaining";
}, 1000);


// === RSVP GOOGLE SCRIPT API ===
const API_URL = "https://script.google.com/macros/s/AKfycbxPocYcNi0Bd1NeS7kbFJFUBBngKyNN133luAq2_XT0fDglpCtNTtjFnJ2b9u00O4_h/exec";

// Submit RSVP
document.getElementById("rsvpForm").addEventListener("submit", async function (event) {
    event.preventDefault();

    const name = document.getElementById("name").value.trim();
    const status = document.getElementById("status").value.trim();
    const note = document.getElementById("note").value.trim();

    const response = await fetch(API_URL, {
        method: "POST",
        mode: "cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ name, email: "", status, note })
    });

    const result = await response.json();
    
    if (result.result === "success") {
        alert("Thank you! Your RSVP has been recorded.");
        loadGuestList();
        document.getElementById("rsvpForm").reset();
    } else {
        alert("Error submitting RSVP.");
    }
});

// Load guest list
async function loadGuestList() {
    const response = await fetch(API_URL);
    const data = await response.json();

    const guestListDiv = document.getElementById("guestList");
    guestListDiv.innerHTML = "";

    data.forEach(entry => {
        const row = document.createElement("div");
        row.style.marginBottom = "6px";
        row.innerHTML = `<b>${entry.name}</b> — ${entry.status}<br><i>${entry.note || ""}</i>`;
        guestListDiv.appendChild(row);
    });
}

// Load immediately
loadGuestList();

</script>

</body>
</html>



